@using Microsoft.AspNetCore.Http
@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor
@{
    ViewData["Title"] = "Home";
    var userName = HttpContextAccessor.HttpContext.Session.GetString("UserName");

}



<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exoticamp Landing Page</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="sha384-..." crossorigin="anonymous">

    <style>
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
        }

        body {
            font-family: Arial, sans-serif;
        }

        header .logo {
            height: 50px;
        }

        #row {
            --bs-gutter-x: 0.8rem;
            --bs-gutter-y: 0;
            display: inline-flex;
            flex-wrap: wrap;
            margin-top: calc(-1* var(--bs-gutter-y));
            margin-right: calc(-.5* var(--bs-gutter-x));
            margin-left: calc(-.5* var(--bs-gutter-x));
        }

        .banner {
            background-image: url('banner.jpg');
            background-size: cover;
            background-position: center;
        }

        .search-bar input {
            width: 100%;
            padding: 0px;
            font-size: 1.2em;
        }

        .menu-img {
            width: 35px; /* Adjust the width as needed */
            height: 35px; /* Adjust the height as needed */
            object-fit: cover; /* Ensures the image covers the area without distortion */
            display: block;
            margin: 0 auto 10px; /* Centers the image and adds some space below it */
        }

        .dummy-content {
            text-align: center;
            border: 1px solid #ccc;
            padding: 10px;
            border-radius: 5px;
        }

            .dummy-content img {
                width: 100%;
                height: auto;
            }

        .carousel-control-prev, .carousel-control-next {
            background-color: rgba(0,0,0,0.5);
            width: 50px;
        }

        .d-none {
            display: none;
        }

        .d-block {
            display: block;
        }

        .img-thumbnail {
            padding: .25rem;
            background-color: #fff;
            border: 1px solid #dee2e6;
            border-radius: .25rem;
            max-width: 100px;
            height: 100px;
        }

        .abc-container {
            display: flex;
            gap: 20px; /* Space between abc-content elements */
        }

        .abc-content {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        }

        footer ul {
            padding: 0;
            list-style: none;
        }

            footer ul li a {
                color: white;
                text-decoration: none;
            }

                footer ul li a:hover {
                    text-decoration: underline;
                }

        .chatbox {
            border: 1px solid #ccc;
            border-radius: 10px;
            padding: 10px;
            max-height: 70%;
            overflow-y: auto;
            background-color: #f9f9f9;
        }

        .chatbox-messages {
            max-height: 280px;
            overflow-y: auto;
            padding: 10px;
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 10px;
            margin-bottom: 10px;
        }

        .message {
            margin-bottom: 10px;
        }

        .bot-message {
            text-align: left;
        }

        .user-message {
            text-align: right;
        }

        .user-query {
            margin-top: 10px;
        }

        .chat-option button {
            border: none;
            background: none;
            text-decoration: none;
            background: #dcefff;
        }



        .chat-message-style {
            border: none;
            background: none;
            text-decoration: none;
            background: #dcefff;
            padding: 10px;
            border-radius: 5px;
            display: inline-block;
        }

        .dropdown:hover .dropdown-menu {
            display: block;
            margin-top: 0;
        }

        .dropdown .dropdown-menu {
            display: none;
        }

        .dropdown:hover .dropdown-toggle::after {
            border-top: 0;
            border-bottom: 0.3em solid;
        }

        #chatbot-window {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 30%;
            height: 50%;
            background-color: white;
            border: 1px solid #ccc;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            z-index: 1050;
            display: none;
            flex-direction: column;
        }

        #chatbot-window .chatbot-header {
            background-color: #007bff;
            color: white;
            padding: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        #chatbot-window .chatbot-body {
            flex-grow: 1;
            padding: 10px;
            overflow-y: auto;
        }
        .btn-primary{
        color:  #ffff;
            background-color: #0d6efd;
        border-color: #939292;
        }


        #chatbot-window .chatbot-close {
            cursor: pointer;
        }

    </style>
</head>
<body>
    <!-- Header -->
   @*  <header class="bg-primary text-white text-center p-3">
        <div class="container d-flex justify-content-between align-items-center">
            <div>
                <img src="/Assets/Icons/Exoticamp.png" alt="Exoticamp Logo" class="logo">
            </div>
            <nav>
                <a href="#" class="text-white ml-3">Toll Free Number</a>
                <a href="#" class="text-white ml-3">List My Site / Become a Host</a>
                @if (string.IsNullOrEmpty(userName))
                {
                    <a asp-action="Login" asp-controller="Account" class="text-white">Login/Signup</a>
                }
                else
                {
                    <li class="nav-item dropdown list-unstyled">
                        <a class="text-white dropdown-toggle" href="#" id="navbarDropdown" role="button"
                           aria-expanded="false">
                            Welcome @userName!
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item" asp-action="Profile" asp-controller="User">My Profile</a></li>
                            <li><a class="dropdown-item" asp-action="Logout" asp-controller="Account">Another action</a></li>
                            
                        </ul>
                    </li>

                }

            </nav>
        </div>
    </header> *@

    <header class="bg-primary text-white text-center p-3">
        <div class="container d-flex justify-content-between align-items-center">
            <div>
                <img src="/Assets/Icons/Exoticamp.png" alt="Exoticamp Logo" class="logo">
            </div>
            <nav class="d-flex align-items-center gap-2">
                <a href="#" class="text-white ml-3">Toll Free Number</a>
                <a href="#" class="text-white ml-3">List My Site / Become a Host</a>
                <div class="nav-item dropdown ml-3">
                    <a class="text-white dropdown-toggle" href="#" id="navbarDropdown" role="button"
                       data-bs-toggle="dropdown" aria-expanded="false">
                        Locations
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown" id="locationDropdown">
                        <!-- Locations will be dynamically populated here -->
                    </ul>
                </div>
                @if (string.IsNullOrEmpty(userName))
                {
                    <a asp-action="Login" asp-controller="Account" class="text-white ml-3">Login/Signup</a>
                }
                else
                {
                    <div class="nav-item dropdown ml-3">
                        <a class="text-white dropdown-toggle" href="#" id="navbarDropdown" role="button"
                           data-bs-toggle="dropdown" aria-expanded="false">
                            Welcome @userName!
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item" asp-action="Profile" asp-controller="User">My Profile</a></li>
                            <li><a class="dropdown-item" asp-action="Logout" asp-controller="Account">Logout</a></li>
                        </ul>
                    </div>
                }
            </nav>
        </div>
    </header>

    


    <!-- Collapsible Content Sections -->
    <!-- Other Sections -->
    @RenderBody()
    <!-- Content Sections -->
    </div>
    @* Code for chatbot. *@
    <div id="chatbot-icon" style="position:fixed; bottom:25px; right:25px; cursor:pointer; z-index:1000;">
        <img src="~/images/robot.png" alt="Chatbot" style="width:50px; height:50px;" />
    </div>
    <div id="chatbot-window">
        <div class="chatbot-header">
            <h5 class="modal-title">Welcom @userName!</h5>
            <span class="chatbot-close" aria-hidden="true">&times;</span>
        </div>
        <div class="chatbot-body" id="chatbot-content"></div>
    </div>

    <!-- Footer -->
    <footer class="bg-primary text-white text-center p-2 mt-2">
        <div class="container">
            <div class="row">
                <div class="col">
                    <h5>Quick Links</h5>
                    <ul class="list-unstyled">
                        <li><a href="#" class="text-white">Blogs</a></li>
                        <li><a href="#" class="text-white">Investors</a></li>
                        <li><a href="#" class="text-white">Affiliation MSME</a></li>
                        <li><a href="#" class="text-white">FAQ</a></li>
                        <li><a href="#" class="text-white">About Us</a></li>
                        <li><a href="#" class="text-white">News & Media</a></li>
                    </ul>
                </div>
                <div class="col">
                    <h5>Contact</h5>
                    <p>Terms of Use</p>
                    <a asp-action="ContactUsAll" asp-controller="ContactUs" class="text-white">Contact Us</a>
                    <p>Sitemap</p>
                </div>
                <div class="col">
                    <h5>Social Media</h5>
                    <a href="#" class="text-white">Facebook</a><br>
                    <a href="#" class="text-white">Instagram</a><br>
                    <a href="#" class="text-white">Twitter</a><br>
                    <a href="#" class="text-white">LinkedIn</a><br>
                </div>
            </div>
            <div class="mt-1">
                <small>&copy; 2024 Exoticamp. All rights reserved.</small>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.9.2/umd/popper.min.js" integrity="sha512-2rNj2KJ+D8s1ceNasTIex6z4HWyOnEYLVC3FigGOmyQCZc2eBXKgOxQmo3oKLHyfcj53uz4QMsRCWNbLd32Q1g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    <script>



        $(document).ready(function () {

            $.ajax({
                url: '@Url.Action("GetLocations", "Home")',
                type: 'GET',
                success: function (data) {
                    var locationDropdown = $('#locationDropdown');
                    locationDropdown.empty(); // Clear any existing options

                    data.forEach(function (location) {
                        locationDropdown.append('<li><a class="dropdown-item, location-item" data-id="'+ location.id +'">' + location.name + '</a></li>');
                    });
                },
                error: function (error) {
                    console.log('Error fetching locations:', error);
                }
            });

            $(document).on('click', '.location-item', function () {
                var locationId = $(this).data('id');

                $.ajax({
                    url: '@Url.Action("SetLocationId", "Home")',
                    type: 'POST',
                    data: { locationId: locationId },
                    success: function (response) {
                        if (response.success) {
                            // Handle success - you can redirect or update the UI accordingly
                            location.reload();
                        } else {
                            // Handle failure
                            alert('Failed to set location ID.');
                        }
                    },
                    error: function () {
                        // Handle error
                        alert('An error occurred while setting the location ID.');
                    }
                });
            });

            $('.collapse-content').addClass('d-none').removeClass('d-block');

            $('.menu-button').on('click', function () {
                var target = $(this).data('target');

                // Hide all other collapse-content elements
                $('.collapse-content').not(target).addClass('d-none').removeClass('d-block');

                // Toggle the targeted element
                $(target).toggleClass('d-none d-block');
            });
        });
        //back button<script>
        document.getElementById('backButton').addEventListener('click', function () {
            window.history.back();
        });




        // Example data fetching (to be replaced with real data fetching)
        document.addEventListener('DOMContentLoaded', () => {
            const events = [
                { title: 'Camping Event 1', location: 'Location 1' },
                { title: 'Camping Event 2', location: 'Location 2' },
            ];

            const nearestSites = [
                { name: 'Campsite 1', distance: '5 km' },
                { name: 'Campsite 2', distance: '10 km' },
            ];

            const trendingDestinations = [
                { name: 'Destination 1' },
                { name: 'Destination 2' },
            ];

            const glampingLocations = [
                { name: 'Glamping Site 1' },
                { name: 'Glamping Site 2' },
            ];

            const promotionalBanners = [
                { image: 'promo1.jpg' },
                { image: 'promo2.jpg' },
            ];

            const reviews = [
                { name: 'User 1', review: 'Great experience!', rating: 5 },
                { name: 'User 2', review: 'Amazing!', rating: 4 },
            ];

            populateSection('events', events, 'title', 'location');
            populateSection('nearest-sites', nearestSites, 'name', 'distance');
            populateSection('trending-destinations', trendingDestinations, 'name');
            populateSection('glamping-locations', glampingLocations, 'name');
            populateSection('promotional-banners', promotionalBanners, 'image');
            populateSection('reviews', reviews, 'name', 'review', 'rating');
        });

        function populateSection(sectionId, data, ...fields) {
            const section = document.getElementById(sectionId);
            data.forEach(item => {
                const div = document.createElement('div');
                div.className = 'col-md-4 mb-3';
                div.innerHTML = fields.map(field => `<p>${item[field]}</p>`).join('');
                section.appendChild(div);
            });
        }

    </script>
    <script>
        $(document).ready(function () {
            $('#chatbot-icon').click(function () {
                debugger
                $.get('@Url.Action("ChatbotPartial", "Chatbot")', function (data) {
                    $('#chatbot-content').html(data);
                    $('#chatbot-window').show();
                });
            });

            $('.chatbot-close').click(function () {
                $('#chatbot-window').hide();
            });
        });
    </script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
